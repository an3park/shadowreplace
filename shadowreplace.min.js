'use strict';window.shadowReplace=function(a){function b(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.responseType="text",d.open("GET",a),d.addEventListener("load",function(){return b(d.response)}),d.addEventListener("error",c),d.send()})}function c(a){var b=document.createElement("div").attachShadow({mode:"closed"});b.innerHTML=a,document.title=b.querySelector("title").innerText;var c=document.querySelector(f.targetSelector);c.parentElement.replaceChild(b.querySelector(f.targetSelector),c)}function d(a){var d=b(a).then(c);return f.activeLinkAttribute&&d.then(function(){g.forEach(function(b){return b.href===a?b.setAttribute(f.activeLinkAttribute,""):b.removeAttribute(f.activeLinkAttribute)})}),d}(null===a||"object"!=typeof a)&&(a={});var f={activeLinkAttribute:a.activeLinkAttribute,targetSelector:a.targetSelector||"#container",linksSelector:a.linksNodeList||document.getElementsByClassName("link"),history:!1!==a.history},g=f.linksSelector;f.activeLinkAttribute&&g.forEach(function(a){a.href===window.location.href&&a.setAttribute(f.activeLinkAttribute,"")}),g.forEach(function(b){b.addEventListener("click",function(a){a.preventDefault();f.history&&window.location.href===b.href||d(b.href).then(function(){f.history&&(window.history.state&&window.history.state.shadowReplace||window.history.replaceState({shadowReplace:!0},""),window.history.pushState({shadowReplace:!0},"",b.href))})})}),f.history&&window.addEventListener("popstate",function(a){a.state&&a.state.shadowReplace&&d(document.location)})};